<!DOCTYPE html>
<html>
<head>
<title>Play Queue for Youtube</title>
<meta charset="utf-8">
<meta name="description" content="youtubeを連続再生するweb app">
<meta name="author" content="dalchemic">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="favicon.ico">
<meta name="mobile-web-app-capable" content="yes">
<link rel="icon" sizes="196x196" href="favicon.ico">
<link rel="apple-touch-icon" sizes="152x152" href="favicon.ico">

<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<script src="https://unpkg.com/vue"></script>
<link rel="stylesheet" href="iziToast/iziToast.min.css">
<script src="iziToast/iziToast.min.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
<link href="https://fonts.googleapis.com/css?family=Anton" rel="stylesheet">

<link rel="stylesheet" href="index.css">

</head>

<body>
    <div id="center-box">
<div id="app">
  
    <h1>Play Queue</h1>
    <!--タブ選択バー-->
    <div id="tab-bar" class="row tab-row">
      <div class="col s12">
          <div class="tab col s4" v-on:click='tabChange(0)' v-bind:class="{'selected-tab-bar': tabCommon.selectedTab==0}">
              <i class="material-icons tab-switch-bar">play_arrow</i>
          </div>
        <div class="tab col s4" v-on:click='tabChange(1)' v-bind:class="{'selected-tab-bar': tabCommon.selectedTab==1}">
          <i class="material-icons tab-switch-bar">playlist_play</i>
        </div>
        <div class="tab col s4" v-on:click='tabChange(2)' v-bind:class="{'selected-tab-bar': tabCommon.selectedTab==2}">
          <i class="material-icons tab-switch-bar">search</i>
        </div>
      </div>
    </div>
    <!--動画再生タブ-->    
    <div id="tab-player" v-bind:class="{'displayNone':tabCommon.selectedTab!=0}">
        <div id='player-box'>
          <div id="player"></div>
        </div>
        <div class="title">{{tabQueue.mvList[tabQueue.mvListCt].title}}</div>
        <div class="description">{{tabQueue.mvList[tabQueue.mvListCt].description}}</div>
        
        <div class='list-name'>関連動画</div>
        <div class="movie-list col s12 row" v-for="item in tabPlay.mvList" :key="item.uniqueKey">
            <div class="card-panel grey lighten-5 z-depth-1 intab-card-panel">
              <div class='next-play'
               v-bind:class="{'displayNone':!(tabQueue.loop==false && 
                                              tabQueue.autoPlayRelatedMovie==true &&
                                              tabQueue.mvListCt + 1 >=tabQueue.mvList.length &&
                                              item==tabPlay.mvList[0]
                                              )}">次に再生:</div>
              <div class="row valign-wrapper intab-row">
                <div v-on:click='listMovieClicked(item)'>
                  <div class="col s3">
                    <img v-bind:src="item.thumbnail" alt="" class="responsive-img">
                  </div>
                  <div class="col s9">
                    <span class="black-text">
                        <div class="title">{{item.title}}</div>
                        <div class="description">{{item.description}}</div>
                    </span>
                  </div>
                </div>
              </div>
              <div  class="selected-movie-s12" 
               v-bind:class="{'displayNone':!(item.uniqueKey==tabCommon.ListClickUniqueKey)}" 
               v-on:click='listMovieClicked(item)'>
                <button class="btn waves-effect waves-light " v-on:click="addMovieQueue('PLAY_NOW',item)">
                  <i class="material-icons">play_arrow</i>now
                </button>
                <button class="btn waves-effect waves-light " v-on:click="addMovieQueue('PLAY_NEXT',item)">
                  <i class="material-icons">add</i>next
                </button>
                <button class="btn waves-effect waves-light " v-on:click="addMovieQueue('PLAY_LAST',item)">
                  <i class="material-icons">low_priority</i>last
                </button>
              </div>
            </div>
          </div>
    
          <button v-on:click="relatedMovieMore" class="btn waves-effect waves-light">
            <i class="material-icons">keyboard_arrow_down</i>
          </button>
    </div>

    <!--再生リストタブ-->    
    <div class="tab-queue" v-bind:class="{'displayNone':tabCommon.selectedTab!=1}">
      <div>再生リスト</div>
      <div class='move-here' v-bind:class="{'displayNone':tabQueue.move.able==false}" v-on:click='moveHere(0)'>here</div>
      <div class="movie-list col s12 row" v-for="item in tabQueue.mvList" :key="item.uniqueKey">
        <div
         class="card-panel grey lighten-5 z-depth-1 intab-card-panel"
         v-bind:class='{"now-play-movie":item.uniqueKey==tabQueue.mvList[tabQueue.mvListCt].uniqueKey}'>
          <div 
           class="row valign-wrapper intab-row"
           v-bind:class='{"now-move-movie":item==tabQueue.mvList[tabQueue.move.from]}'>
            <div v-on:click='listMovieClicked(item)'>
              <div class="col s3">
                <img v-bind:src="item.thumbnail" alt="" class="responsive-img">
              </div>
              <div class="col s9">
                <span class="black-text">
                    <div class="title">{{item.title}}</div>
                    <div class="description">{{item.description}}</div>
                </span>
              </div>
            </div>
          </div>
          <div  class="selected-movie-s12" 
           v-bind:class="{'displayNone':!(item.uniqueKey==tabCommon.ListClickUniqueKey)}" 
           v-on:click='listMovieClicked(item)'>
           <!--クリックされている∧再生中でない⇒表示-->
           <div v-bind:class="{'displayNone':item==tabQueue.mvList[tabQueue.mvListCt] }">
              <button class="btn waves-effect waves-light " v-on:click="changeMovieQueue('JUMP',item)">
                <i class="material-icons">play_arrow</i>now
              </button>
              <button class="btn waves-effect waves-light " v-on:click="changeMovieQueue('DELETE',item)">
                <i class="material-icons">clear</i>delete
              </button>
              <button class="btn waves-effect waves-light " v-on:click="changeMovieQueue('MOVE',item)">
                <i class="material-icons">format_line_spacing</i>move
              </button>
            </div>
            <div v-bind:class="{'displayNone':item!=tabQueue.mvList[tabQueue.mvListCt]}">
                <button class="btn waves-effect waves-light disabled">
                  <i class="material-icons">play_arrow</i>now
                </button>
                <button class="btn waves-effect waves-light disabled">
                  <i class="material-icons">clear</i>delete
                </button>
                <button class="btn waves-effect waves-light disabled">
                  <i class="material-icons">format_line_spacing</i>move
                </button>
            </div>
          </div>  
        </div>
        <div class='move-here' v-bind:class="{'displayNone':tabQueue.move.able==false}" v-on:click='moveHere(item)'>here</div>
      </div>
      <tr>
      <div class="settings">
          <div class="switch">
              <span class="switch-caption">Loop:</span>  
              <label>
                Off
                <input type="checkbox" v-model="tabQueue.loop">
                <span class="lever"></span>
                On
              </label>
          </div>
          <div class="switch" v-bind:class="{'displayNone':tabQueue.loop==true}">
              <span class="switch-caption">最後の動画の関連動画を再生する:</span> 
              <label>
                Off
                <input type="checkbox" v-model="tabQueue.autoPlayRelatedMovie">
                <span class="lever"></span>
                On
              </label>
          </div>
          <div class="switch" v-bind:class="{'displayNone':tabQueue.loop==false}">
              <span class='switch-caption strikeout'>最後の動画の関連動画を再生する:</span>  
              <label>
                Off
                <input disabled type="checkbox" v-model="tabQueue.autoPlayRelatedMovie">
                <span class="lever"></span>
                <span class="strikeout">On</span>
              </label>
          </div>
            
      </div>
    </div>

    <!--検索リストタブ-->    
    <div class="tab-search" v-bind:class="{'displayNone':tabCommon.selectedTab!=2}">
      <form @submit.prevent="searchWordSubmitted">
        <input type="text" v-model="tabSearch.word" placeholder="search word" class="searchWordInput">
<!--        <button v-on:click="searchWordSubmitted">search</button>-->
      </form>

      <div class="movie-list col s12 row" v-for="item in tabSearch.mvList" :key="item.uniqueKey">
        <div class="card-panel grey lighten-5 z-depth-1 intab-card-panel">
          <div class="row valign-wrapper intab-row">
            <div v-on:click='listMovieClicked(item)'>
              <div class="col s3">
                <img v-bind:src="item.thumbnail" alt="" class="responsive-img">
              </div>
              <div class="col s9">
                <span class="black-text">
                    <div class="title">{{item.title}}</div>
                    <div class="description">{{item.description}}</div>
                </span>
              </div>
            </div>
          </div>
          <div  class="selected-movie-s12" 
           v-bind:class="{'displayNone':!(item.uniqueKey==tabCommon.ListClickUniqueKey)}" 
           v-on:click='listMovieClicked(item)'>
            <button class="btn waves-effect waves-light " v-on:click="addMovieQueue('PLAY_NOW',item)">
              <i class="material-icons">play_arrow</i>now
            </button>
            <button class="btn waves-effect waves-light " v-on:click="addMovieQueue('PLAY_NEXT',item)">
              <i class="material-icons">add</i>next
            </button>
            <button class="btn waves-effect waves-light " v-on:click="addMovieQueue('PLAY_LAST',item)">
              <i class="material-icons">low_priority</i>last
            </button>
          </div>
        </div>
      </div>

      <button v-on:click="searchWordSubmittedMore" class="btn waves-effect waves-light">
        <i class="material-icons">keyboard_arrow_down</i>
      </button>
    </div>
  </div>
</div>

<script src="index.js"></script>
</body>
</html>
